
 <!DOCTYPE HTML>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8">
  
    <title>mongodb相关内容学习 | 朱阳星的日常</title>
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=3, minimum-scale=1">
    
    <meta name="author" content="朱阳星">
    
    <meta name="description" itemprop="description" content="mongodb安装,shell命令记录">
    
    <meta name="keywords" content="前端，mongoodb">
    
    
    <link rel="alternate" href="/atom.xml" title="朱阳星的日常" type="application/atom+xml">
    
    
    <link rel="icon" href="/img/favicon.ico">
    
    
    <link rel="apple-touch-icon" href="/img/pacman.jpg">
    <link rel="apple-touch-icon-precomposed" href="/img/pacman.jpg">
    
    <link rel="stylesheet" href="/css/style.css">
    
<script type="text/javascript">
var _hmt = _hmt || [];
(function() {
  var hm = document.createElement("script");
  hm.src = "//hm.baidu.com/hm.js?a0056a3043f21f699150e6a4b66104ef";
  var s = document.getElementsByTagName("script")[0]; 
  s.parentNode.insertBefore(hm, s);
})();
</script>

</head>

  <body>
    <header>
      <div>
	
		<div id="imglogo">
			<a href="/"><img src="/img/logo.svg" alt="朱阳星的日常" title="朱阳星的日常"/></a>
		</div>
		
			<div id="textlogo">
				<h1 class="site-name"><a href="/" title="朱阳星的日常">朱阳星的日常</a></h1>
				<h2 class="blog-motto"></h2>
			</div>
			<div class="navbar">
				<a class="navbutton navmobile" href="#" title="菜单">
				</a>
			</div>
			<nav class="animated">
				<ul>
					
						<li>
							<a href="/">
								首页
							</a>
						</li>
						
						<li>
							<a href="/archives">
								存档
							</a>
						</li>
						
						<li>
							<a href="/demo.html">
								栗子
							</a>
						</li>
						
							<li>
								
										<form class="search" action="//google.com/search" method="get" accept-charset="utf-8">
											<label>Search</label>
											<input type="text" id="search" name="q" autocomplete="off" maxlength="20" placeholder="搜索" />
											<input type="hidden" name="q" value="site:www.zhuyangxing.cn">
										</form>
										
							</li>
				</ul>
			</nav>
</div>

    </header>
    <div id="container">
      <div id="main" class="post" itemscope itemprop="blogPost">
	<article itemprop="articleBody"> 
		<header class="article-info clearfix">
  <h1 itemprop="name">
    
      <a href="/2016/11/17/mongodb相关内容学习/" title="mongodb相关内容学习" itemprop="url">mongodb相关内容学习</a>
  </h1>
  <p class="article-author">By
    
      <a href="http://www.zhuyangxing.cn" title="朱阳星">朱阳星</a>
    </p>
  <p class="article-time">
    <time datetime="2016-11-17T05:21:35.000Z" itemprop="datePublished">2016-11-17 13:21</time>
    <!-- 更新日期:<time datetime="2017-06-19T06:00:01.000Z" itemprop="dateModified">2017-06-19 14:00</time>
     -->
  </p>
</header>

	<div class="article-content">
		
		
		<div id="toc" class="toc-article">
			<strong class="toc-title">文章目录</strong>
		<ol class="toc"><li class="toc-item toc-level-3"><a class="toc-link" href="#windows下安装mongodb"><span class="toc-number">1.</span> <span class="toc-text">windows下安装mongodb</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#mongodb部分命令"><span class="toc-number">2.</span> <span class="toc-text">mongodb部分命令</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Mac-OSX-下安装MongoDB"><span class="toc-number"></span> <span class="toc-text">Mac OSX 下安装MongoDB</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#以下内容为我自己安装流程记录已确保能正常使用"><span class="toc-number">1.</span> <span class="toc-text">以下内容为我自己安装流程记录已确保能正常使用</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Mac-OSX-下设置环境变量"><span class="toc-number"></span> <span class="toc-text">Mac OSX 下设置环境变量</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Mac-OSX-下设置MongoDB的开机启动"><span class="toc-number"></span> <span class="toc-text">Mac OSX 下设置MongoDB的开机启动</span></a>
		</div>
		
		<h3 id="windows下安装mongodb"><a href="#windows下安装mongodb" class="headerlink" title="windows下安装mongodb"></a>windows下安装mongodb</h3><p>下载exe文件并安装<br>创建数据库文件的存放位置，比如<code>f:/mongodb/data/db</code>。<br>启动mongodb服务之前需要必须创建数据库文件的存放文件夹，否则命令不会自动创建，而且不能启动成功。</p>
<p>进入mongodb安装文件的bin目录（默认：<code>C:\Program Files\MongoDB\Server\3.0\bin</code>），<br>输入如下的命令设置mongoDB的dbpath：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">mongod --dbpath f:\mongodb\data\db</div></pre></td></tr></table></figure></p>
<p>打开<a href="http://localhost:27017" target="_blank" rel="external">http://localhost:27017</a>查看是否启动成功</p>
<p>为了以后不用每次都添加<code>--dbpath</code>参数,需做如下设置<br>在<code>f:\mongodb</code>新建文件<code>mongo.config</code>并填写内容如下<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">dbpath=f:\mongodb\data\db</div><div class="line">logpath=f:\mongodb\log\mongo.log</div></pre></td></tr></table></figure></p>
<p>进入mongodb安装文件的bin目录，输入如下的命令添加mongodb配置：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">mongod --config F:\mongodb\mongo.config</div></pre></td></tr></table></figure></p>
<p>如果发现新生成日志文件则表示配置成功。</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div></pre></td><td class="code"><pre><div class="line"><span class="comment">//安装windows服务</span></div><div class="line">mongod --config f:\mongodb\mongo.config -install -serviceName <span class="string">"MongoDB"</span></div><div class="line"></div><div class="line"><span class="comment">//在win10上安装出现如下错误提示 log里看到的(服务安装却不显示成功)</span></div><div class="line"><span class="number">2017</span><span class="number">-03</span><span class="number">-02</span>T11:<span class="number">41</span>:<span class="number">12.460</span>+<span class="number">0800</span> I CONTROL  [main] Trying to install Windows service <span class="string">'MongoDB'</span></div><div class="line"><span class="number">2017</span><span class="number">-03</span><span class="number">-02</span>T11:<span class="number">41</span>:<span class="number">12.460</span>+<span class="number">0800</span> I CONTROL  [main] <span class="built_in">Error</span> connecting to the Service Control Manager: 拒绝访问。 (<span class="number">5</span>)</div><div class="line"><span class="comment">//解决办法</span></div><div class="line"><span class="comment">//是因为你在cmd下没有权限所致</span></div><div class="line"><span class="comment">//以管理员身份（win+x，然后A键）启动cmd以后</span></div><div class="line"><span class="comment">//再执行你原来的命令就没问题了。</span></div><div class="line"></div><div class="line"><span class="comment">//进入mongoDB shell</span></div><div class="line">cd C:\Program Files\MongoDB\Server\<span class="number">3.0</span>\bin</div><div class="line">mongo</div><div class="line"><span class="comment">//也可以将mongo所在路径加入环境变量path中,</span></div><div class="line"><span class="comment">//之后就可以直接在cmd里输入mongo进而打开mongo shell</span></div></pre></td></tr></table></figure>
<p>2017-03-02T11:41:12.460+0800 I CONTROL  [main] Trying to install Windows service ‘MongoDB’<br>2017-03-02T11:41:12.460+0800 I CONTROL  [main] Error connecting to the Service Control Manager: 拒绝访问。 (5)</p>
<p><a href="https://docs.mongodb.com/manual/" target="_blank" rel="external">mongoDB使用手册</a></p>
<h3 id="mongodb部分命令"><a href="#mongodb部分命令" class="headerlink" title="mongodb部分命令"></a>mongodb部分命令</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div><div class="line">57</div><div class="line">58</div><div class="line">59</div><div class="line">60</div><div class="line">61</div><div class="line">62</div><div class="line">63</div><div class="line">64</div><div class="line">65</div><div class="line">66</div><div class="line">67</div><div class="line">68</div><div class="line">69</div><div class="line">70</div><div class="line">71</div><div class="line">72</div><div class="line">73</div><div class="line">74</div><div class="line">75</div><div class="line">76</div><div class="line">77</div><div class="line">78</div><div class="line">79</div><div class="line">80</div><div class="line">81</div><div class="line">82</div><div class="line">83</div><div class="line">84</div><div class="line">85</div><div class="line">86</div><div class="line">87</div><div class="line">88</div><div class="line">89</div><div class="line">90</div><div class="line">91</div><div class="line">92</div><div class="line">93</div><div class="line">94</div><div class="line">95</div><div class="line">96</div><div class="line">97</div><div class="line">98</div><div class="line">99</div><div class="line">100</div><div class="line">101</div><div class="line">102</div><div class="line">103</div><div class="line">104</div><div class="line">105</div><div class="line">106</div><div class="line">107</div><div class="line">108</div><div class="line">109</div><div class="line">110</div><div class="line">111</div><div class="line">112</div><div class="line">113</div><div class="line">114</div><div class="line">115</div><div class="line">116</div><div class="line">117</div><div class="line">118</div><div class="line">119</div><div class="line">120</div><div class="line">121</div><div class="line">122</div><div class="line">123</div><div class="line">124</div><div class="line">125</div><div class="line">126</div></pre></td><td class="code"><pre><div class="line">//启用mongo shell</div><div class="line">mongo</div><div class="line">//连接远程mongo shell</div><div class="line">mongo 192.168.1.100</div><div class="line"></div><div class="line">//显示数据库</div><div class="line">show dbs</div><div class="line"></div><div class="line">//切换数据库</div><div class="line">use dbname</div><div class="line"></div><div class="line">//删除数据库</div><div class="line">db.dropDatabase()</div><div class="line"></div><div class="line">//显示当前正在使用的数据库</div><div class="line">db</div><div class="line">//显示当前数据库下面的所有集合(数据库里的数据表)</div><div class="line">show collections</div><div class="line">//导出test数据库到data/backup文件夹下</div><div class="line">mongodump -d test -o data/backup  </div><div class="line">//在要恢复的文件夹的父级目录里使用如下命令</div><div class="line">mongorestore data/backup</div><div class="line"></div><div class="line">//Use mongoexport to export the data: 导出test数据库下面的traffic表到traffic.json文件</div><div class="line">mongoexport --db test --collection traffic --out traffic.json</div><div class="line"></div><div class="line">mongoimport --db users --collection contacts --file contacts.json  </div><div class="line">mongoimport -d test -c cuxiao --type csv --headerline --file C:\Users\zyx\Desktop\2017-04-06.csv</div><div class="line"></div><div class="line"></div><div class="line">//插入记录</div><div class="line">db.collectionName.insert(&#123;&quot;userName&quot;:&quot;zs0&quot;,&quot;birthday&quot;:&quot;1999-09-09&quot;,&quot;passWord&quot;:&quot;123456&quot;,&quot;gender&quot;:0&#125;);</div><div class="line">//返回结果入下</div><div class="line">//WriteResult(&#123; &quot;nInserted&quot; : 1 &#125;)</div><div class="line"></div><div class="line">//插入一条记录 New in version 3.2</div><div class="line">db.collectionName.insertOne(&#123;&quot;userName&quot;:&quot;zs10&quot;,&quot;birthday&quot;:&quot;1999-09-09&quot;,&quot;passWord&quot;:&quot;123456&quot;,&quot;gender&quot;:0&#125;);</div><div class="line">// 返回结果如下</div><div class="line">&#123;</div><div class="line">    &quot;acknowledged&quot; : true,</div><div class="line">    &quot;insertedId&quot; : ObjectId(&quot;57e8ef4a0a3c3720c7a9650d&quot;)</div><div class="line">&#125;</div><div class="line"></div><div class="line">//插入多条记录 New in version 3.2</div><div class="line">db.collectionName.insertMany([</div><div class="line">    &#123;&quot;userName&quot;:&quot;zs3&quot;,&quot;birthday&quot;:&quot;1999-09-09&quot;,&quot;passWord&quot;:&quot;123456&quot;,&quot;gender&quot;:0&#125;,</div><div class="line">    &#123;&quot;userName&quot;:&quot;zs1&quot;,&quot;birthday&quot;:&quot;1999-09-09&quot;,&quot;passWord&quot;:&quot;123456&quot;,&quot;gender&quot;:0&#125;,</div><div class="line">    &#123;&quot;userName&quot;:&quot;zs2&quot;,&quot;birthday&quot;:&quot;1999-09-09&quot;,&quot;passWord&quot;:&quot;123456&quot;,&quot;gender&quot;:0&#125;]</div><div class="line">);</div><div class="line">//返回值如下</div><div class="line">&#123;</div><div class="line">    &quot;acknowledged&quot; : true,</div><div class="line">    &quot;insertedIds&quot; : [</div><div class="line">        ObjectId(&quot;57e8ef810a3c3720c7a9650e&quot;),</div><div class="line">        ObjectId(&quot;57e8ef810a3c3720c7a9650f&quot;),</div><div class="line">        ObjectId(&quot;57e8ef810a3c3720c7a96510&quot;)</div><div class="line">    ]</div><div class="line">&#125;</div><div class="line"></div><div class="line"></div><div class="line">//查找全部数据</div><div class="line">db.collectionName.find();</div><div class="line">//查找全部数据但显示前两条</div><div class="line">db.collectionName.find().limit(2);</div><div class="line">//查看查询结果数量</div><div class="line">db.collectionName.find().count();</div><div class="line">//美化查询结果</div><div class="line">db.collectionName.find().pretty();</div><div class="line">//只显示需要列(_id默认显示,如果不需要显示必须显式阻止) 类似于命令 select username, email from users</div><div class="line">db.collectionName.find(&#123;&#125;, &#123;&quot;username&quot; : 1, &quot;email&quot; : 1, &quot;_id&quot; : 0&#125;)</div><div class="line">//单属性匹配</div><div class="line">db.collectionName.find(&#123;&quot;name&quot;:&quot;zs&quot;&#125;);</div><div class="line">db.collectionName.find(&#123;&quot;user.name&quot;:&quot;zs&quot;&#125;);</div><div class="line">//多属性同时匹配</div><div class="line">db.collectionName.find(&#123;&quot;age&quot;:20,&quot;name&quot;:&quot;zs&quot;&#125;);</div><div class="line">//时间段查询</div><div class="line">var start = new Date(2017, 3, 1);</div><div class="line">var end = new Date(2017, 4, 7);</div><div class="line">db.cuxiao.find(&#123;created_on: &#123;$gte: start, $lt: end&#125;&#125;);</div><div class="line">//正则表达式匹配 find  name startwith &quot;z&quot; and endWith &quot;s&quot;</div><div class="line">db.collectionName.find(&#123;&quot;name&quot;:/^z/&#125;,&#123;&quot;name&quot;:/s$/&#125;);</div><div class="line">//正则表达式匹配 find  name 包含BD字符串</div><div class="line">db.collectionName.find(&#123;&quot;name&quot;:/BD+/&#125;);</div><div class="line">//where条件匹配</div><div class="line">db.collectionName.find(&#123;$where:function()&#123;return this.name=&quot;zs&quot;&#125;&#125;);</div><div class="line">//find age&lt;23 gl:less than</div><div class="line">db.collectionName.find(&#123;&quot;age&quot;:&#123;$lt:23&#125;&#125;);</div><div class="line">//find age&gt;23 gt：greater than</div><div class="line">db.collectionName.find(&#123;&quot;age&quot;:&#123;$gt:23&#125;&#125;);</div><div class="line">//find name=&quot;zs&quot; || age=20</div><div class="line">db.collectionName.find(&#123;$or:[&#123;&quot;age&quot;:20&#125;,&#123;&quot;name&quot;:&quot;zs&quot;&#125;]&#125;);</div><div class="line">//find age in (10,20,22)</div><div class="line">db.collectionName.find(&#123;&quot;age&quot;:&#123;$in:[10,20,22]&#125;&#125;);</div><div class="line">//find age not in (10,20,22)</div><div class="line">db.collectionName.find(&#123;&quot;age&quot;:&#123;$nin:[10,20,22]&#125;&#125;);</div><div class="line"></div><div class="line"></div><div class="line">//修改name=zs为new_ZS 年龄为40</div><div class="line">db.person.update(&#123;&quot;name&quot;:&quot;zs&quot;&#125;,&#123;&quot;name&quot;:&quot;new_ZS&quot;,&quot;age&quot;:40&#125;);</div><div class="line">//年龄增加20</div><div class="line">db.person.update(&#123;&quot;name&quot;:&quot;zs&quot;&#125;,&#123;$inc:&#123;&quot;age&quot;:20&#125;&#125;);</div><div class="line">//年龄设置为33</div><div class="line">db.person.update(&#123;&quot;name&quot;:&quot;zs&quot;&#125;,&#123;$set:&#123;&quot;age&quot;:33&#125;&#125;);</div><div class="line">//第三个参数true，表示更新条件找不到时增加一条记录</div><div class="line">db.person.update(&#123;&quot;name&quot;:&quot;szs&quot;&#125;,&#123;$set:&#123;&quot;age&quot;:33&#125;&#125;,true);</div><div class="line">//第四个参数表示更新全部数据</div><div class="line">db.person.update(&#123;&quot;name&quot;:&quot;zs&quot;&#125;,&#123;$inc:&#123;&quot;age&quot;:20&#125;&#125;，true,true);</div><div class="line">//对表中所有数据增加birthday列并设置其默认值</div><div class="line">db.person.update(&#123;&#125;,&#123;$set:&#123;&quot;birthday&quot;:&quot;1991-01-01&quot;&#125;&#125;,true,true);</div><div class="line">//修改字段类型</div><div class="line">db.cuxiao.find(&#123;&quot;商品id&quot;:528438367552&#125;).forEach(function(x) &#123;</div><div class="line">    x.优惠券结束时间 = new Date(x.优惠券结束时间);</div><div class="line">    x.优惠券开始时间 = new Date(x.优惠券开始时间);</div><div class="line">    db.cuxiao.save(x);</div><div class="line">&#125;)</div><div class="line"></div><div class="line"></div><div class="line"></div><div class="line">//删除某集合下`name`字段值为`new_ZS`的记录</div><div class="line">db.collectionName.remove(&#123;&quot;name&quot;:&quot;new_ZS&quot;&#125;);</div><div class="line">//删除某集合下的全部数据（清空表）</div><div class="line">db.collectionName.remove(&#123;&#125;);</div><div class="line">//删除某集合下某字段（eg：userName）不存在的记录</div><div class="line">db.collectionName.remove( &#123; &quot;userName&quot;: &#123; $exists: false &#125; &#125; )</div><div class="line">//删除某集合（删除某表）</div><div class="line">db.collectionName.drop();</div></pre></td></tr></table></figure>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div></pre></td><td class="code"><pre><div class="line"></div><div class="line">//统计年龄为20的记录条数</div><div class="line">db.person.count(&#123;&quot;age&quot;:20&#125;);</div><div class="line">//name不重复的记录</div><div class="line">db.person.distinct(&quot;name&quot;);</div><div class="line">//name不重复的记录条数</div><div class="line">db.cuxiao.distinct(&quot;id&quot;).length</div><div class="line">//name字段升序排列</div><div class="line">db.person.ensureIndex(&#123;&quot;name&quot;:1&#125;)</div><div class="line">db.person.ensureIndex(&#123;&quot;name&quot;:1&#125;,&#123;&quot;unique&quot;:true&#125;);</div><div class="line">//非空唯一 可以为空</div><div class="line">db.person.ensureIndex(&#123;&quot;name&quot;:1&#125;,&#123;&quot;unique&quot;:true,&quot;sparse&quot;:true&#125;);</div><div class="line">db.person.find(&#123;&quot;name&quot;:&quot;ns&quot;&#125;).explain();</div><div class="line">db.person.ensureIndex(&#123;&quot;name&quot;:1,&quot;age&quot;:1&#125;);</div><div class="line">//获取该集合的索引</div><div class="line">db.person.getIndexes();</div><div class="line">// 要删除的索引名字需通过查看得到</div><div class="line">db.person.dropIndexes(&quot;name_1&quot;);</div></pre></td></tr></table></figure>
<h2 id="Mac-OSX-下安装MongoDB"><a href="#Mac-OSX-下安装MongoDB" class="headerlink" title="Mac OSX 下安装MongoDB"></a>Mac OSX 下安装MongoDB</h2><h3 id="以下内容为我自己安装流程记录已确保能正常使用"><a href="#以下内容为我自己安装流程记录已确保能正常使用" class="headerlink" title="以下内容为我自己安装流程记录已确保能正常使用"></a>以下内容为我自己安装流程记录已确保能正常使用</h3><blockquote>
<p>根目录指的是<code>zyxdeMacBook-Pro:/ zyx$</code> 这里显示的是一个<code>/</code><br>而用户根目录是<code>zyxdeMacBook-Pro:~ zyx$</code>这里显示的是一个<code>~</code></p>
</blockquote>
<p>1.把从官网上下的文件，型如：mongodb-osx-x86_64-3.4.0 解压到根目录(非用户根目录)文件夹<br>2.在根目录下(非用户根目录)新建mongodb文件夹,新建db文件夹（存放数据）mongodb/data/db<br>3.<code>sudo chown －R  /mongodb</code> 设置权限<br>4.新建文件mongodb/etc/mongod.conf和mongodb/etc/mongod.log<br>5.进入到bin目录，使用<code>mongod --config /mongodb/etc/mongod.conf</code> 设置mongod 配置。<br>6.如果看到waiting for connections on port 27017<br>7.可以打开浏览器输入：localhost:27017,如果看到It looks like you are trying to access MongoDB over HTTP on the native<br> driver port 说明连接成功了。<br>8.点击终端 Commond+N 打开一个新的终端 cd 到bin目录 ./mongo 便可连接到数据库进行操作  </p>
<p><code>mongod.conf</code> 文件内容如下：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">#mongodb config file</div><div class="line">dbpath=/mongodb/data/db</div><div class="line">logpath=/mongodb/etc/mongod.log</div><div class="line">logappend = true</div></pre></td></tr></table></figure></p>
<h2 id="Mac-OSX-下设置环境变量"><a href="#Mac-OSX-下设置环境变量" class="headerlink" title="Mac OSX 下设置环境变量"></a>Mac OSX 下设置环境变量</h2><p>1.打开 应用程序 -&gt; 实用工具 -&gt; 终端；<br>2.在终端中定位到自己用户的主目录，输入： <code>cd ~</code>；<br>3.创建一个空文件，输入：<code>touch .bash_profile</code> ；<br>4.编辑这个文件，输入：<code>open .bash_profile</code> ；<br>5.在这个文件中输入：<code>export PATH=${PATH}:&lt;文件目录&gt;</code>；（将”&lt;文件目录&gt;”替换成自己想要的目录）<br>例如：<code>export PATH=${PATH}:mongodb-osx-x86_64-2.6.1/bin</code>（我把下载后的文件直接放到了根目录）;<br>6.如果需要添加其他的环境变量例如JAVA_HOME，可以输入：<code>export JAVA_HOME=/Library/Java/Home</code> ；<br>7.<code>source .bash_profile</code>重启终端，测试,这个时候就可以在用户主目录使用上面配置过的配置文件进行设置<code>mongod --config /mongodb/etc/mongod.conf</code>   来启动数据库了，点击终端Commond+N打开一个新的终端，使用mongo命令来连接数据库，对数据库进行操作,比如：<code>show dbs</code> 显示所有的集合  </p>
<h2 id="Mac-OSX-下设置MongoDB的开机启动"><a href="#Mac-OSX-下设置MongoDB的开机启动" class="headerlink" title="Mac OSX 下设置MongoDB的开机启动"></a>Mac OSX 下设置MongoDB的开机启动</h2><p>Mac 下用于初始化系统环境的关键经常是 launchd，它是内核转载成功后启动的第一个进程。<br>所以设置服务的开机启动要用到这个进程。采用 launchd 开机启动 需要配置一个plist文件。</p>
<p>开机启动分为两种：<br>     1、在用户登陆前启动；( plist文件放置在目录：~/Library/LaunchDaemons ) ==我选的是这个 ==<br>     2、在用户登陆后启动。( plist文件放置在目录：~/Library/LaunchAgents )</p>
<p>如 MongoDB 的开机启动,需要在 LaunchDaemons 或 LaunchAgents 创建一个 plist文件。<br>如 org.mongodb.mongod.plist 内容如下所示：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div></pre></td><td class="code"><pre><div class="line">&lt;plist version=&quot;1.0&quot;&gt;</div><div class="line">  &lt;plist version=&quot;1.0&quot;&gt;</div><div class="line">  &lt;dict&gt;</div><div class="line">    &lt;key&gt;Label&lt;/key&gt;</div><div class="line">    &lt;string&gt;org.mongodb.mongod&lt;/string&gt;</div><div class="line">    &lt;key&gt;ProgramArguments&lt;/key&gt;</div><div class="line">    &lt;array&gt;</div><div class="line">      &lt;string&gt;/mongodb-osx-x86_64-3.4.0/bin/mongod&lt;/string&gt;</div><div class="line">      &lt;string&gt;-f&lt;/string&gt;</div><div class="line">      &lt;string&gt;/mongodb/etc/mongod.conf&lt;/string&gt;</div><div class="line">    &lt;/array&gt;</div><div class="line">    &lt;key&gt;RunAtLoad&lt;/key&gt;</div><div class="line">    &lt;true/&gt;</div><div class="line">    &lt;key&gt;KeepAlive&lt;/key&gt;</div><div class="line">    &lt;false/&gt;</div><div class="line">    &lt;key&gt;WorkingDirectory&lt;/key&gt;</div><div class="line">    &lt;string&gt;/mongodb-osx-x86_64-3.4.0&lt;/string&gt;</div><div class="line">    &lt;key&gt;StandardErrorPath&lt;/key&gt;</div><div class="line">    &lt;string&gt;/mongodb/etc/error.log&lt;/string&gt;</div><div class="line">    &lt;key&gt;StandardOutPath&lt;/key&gt;</div><div class="line">    &lt;string&gt;/mongodb/etc/output.log&lt;/string&gt;</div><div class="line">    &lt;key&gt;HardResourceLimits&lt;/key&gt;</div><div class="line">    &lt;dict&gt;</div><div class="line">      &lt;key&gt;NumberOfFiles&lt;/key&gt;</div><div class="line">      &lt;integer&gt;1024&lt;/integer&gt;</div><div class="line">    &lt;/dict&gt;</div><div class="line">    &lt;key&gt;SoftResourceLimits&lt;/key&gt;</div><div class="line">    &lt;dict&gt;</div><div class="line">      &lt;key&gt;NumberOfFiles&lt;/key&gt;</div><div class="line">      &lt;integer&gt;1024&lt;/integer&gt;</div><div class="line">    &lt;/dict&gt;</div><div class="line">  &lt;/dict&gt;</div><div class="line">  &lt;/plist&gt;</div></pre></td></tr></table></figure></p>
<p>注意：以上的几个目录需要自己按自己的安装路径设置<br>plist 文件创建好后 根据自己设置执行如下命令加载到 开机启动中：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">//如果没有这个授权命令会给出如下错误提示</div><div class="line">// /Library/LaunchDaemons/org.mongodb.mongod.plist: Path had bad ownership/permissions</div><div class="line">sudo chown root /Library/LaunchDaemons/org.mongodb.mongod.plist</div><div class="line">sudo launchctl load /Library/LaunchDaemons/org.mongodb.mongod.plist</div></pre></td></tr></table></figure>
<p>或者<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">sudo launchctl load /Library/LaunchAgents/org.mongodb.mongod.plist</div></pre></td></tr></table></figure></p>
<p>命令执行后 mongodb 将会马上启动，下次也会随开机而启动。<br>可通过<a href="http://127.0.0.1:27017/" target="_blank" rel="external">http://127.0.0.1:27017</a>查看是否启动成功。</p>
  
	</div>
		<footer class="article-footer clearfix">




<div class="article-share" id="share">

  <!--<div data-url="http://www.zhuyangxing.cn/2016/11/17/mongodb相关内容学习/" data-title="mongodb相关内容学习 | 朱阳星的日常" data-tsina="null" class="share clearfix">
  </div>-->

</div>
</footer>   	       
	</article>
	
<nav class="article-nav clearfix">
 
 <div class="prev" >
 <a href="/2016/11/19/工作中遇到的部分问题/" title="工作中遇到的部分问题">
  <strong>上一篇:</strong><br/>
  <span>
  工作中遇到的部分问题</span>
</a>
</div>


<div class="next">
<a href="/2016/11/17/express允许多个网站跨域访问/"  title="express允许多个网站跨域访问">
 <strong>下一篇:</strong><br/> 
 <span>express允许多个网站跨域访问
</span>
</a>
</div>

</nav>

	
</div>  
      <div class="openaside"><a class="navbutton" href="#" title="显示侧边栏"></a></div>

  <div id="toc" class="toc-aside">
  <strong class="toc-title">文章目录</strong>
  <ol class="toc"><li class="toc-item toc-level-3"><a class="toc-link" href="#windows下安装mongodb"><span class="toc-number">1.</span> <span class="toc-text">windows下安装mongodb</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#mongodb部分命令"><span class="toc-number">2.</span> <span class="toc-text">mongodb部分命令</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Mac-OSX-下安装MongoDB"><span class="toc-number"></span> <span class="toc-text">Mac OSX 下安装MongoDB</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#以下内容为我自己安装流程记录已确保能正常使用"><span class="toc-number">1.</span> <span class="toc-text">以下内容为我自己安装流程记录已确保能正常使用</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Mac-OSX-下设置环境变量"><span class="toc-number"></span> <span class="toc-text">Mac OSX 下设置环境变量</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Mac-OSX-下设置MongoDB的开机启动"><span class="toc-number"></span> <span class="toc-text">Mac OSX 下设置MongoDB的开机启动</span></a>
  </div>

<div id="asidepart">
<div class="closeaside"><a class="closebutton" href="#" title="隐藏侧边栏"></a></div>
<aside class="clearfix">

  
<div class="tagslist">
	<p class="asidetitle">标签</p>
		<ul class="clearfix">
		
			<li><a href="/tags/css/" title="css">css<sup>1</sup></a></li>
		
			<li><a href="/tags/hexo/" title="hexo">hexo<sup>2</sup></a></li>
		
			<li><a href="/tags/vue/" title="vue">vue<sup>1</sup></a></li>
		
			<li><a href="/tags/前端/" title="前端">前端<sup>15</sup></a></li>
		
			<li><a href="/tags/工具/" title="工具">工具<sup>1</sup></a></li>
		
		</ul>
</div>


  
  <div class="archiveslist">
    <p class="asidetitle"><a href="/archives">归档</a></p>
      <ul class="archive-list"><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/09/">九月 2017</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/06/">六月 2017</a><span class="archive-list-count">3</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/05/">五月 2017</a><span class="archive-list-count">2</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/03/">三月 2017</a><span class="archive-list-count">3</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/01/">一月 2017</a><span class="archive-list-count">2</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2016/11/">十一月 2016</a><span class="archive-list-count">5</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2016/10/">十月 2016</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2016/09/">九月 2016</a><span class="archive-list-count">3</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2016/08/">八月 2016</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2016/06/">六月 2016</a><span class="archive-list-count">2</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2016/05/">五月 2016</a><span class="archive-list-count">2</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2016/04/">四月 2016</a><span class="archive-list-count">2</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2016/03/">三月 2016</a><span class="archive-list-count">3</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2016/02/">二月 2016</a><span class="archive-list-count">4</span></li></ul>
  </div>


  <div class="linkslist">
  <p class="asidetitle">友情链接</p>
    <ul>
      <li><a href="http://www.zhangxinxu.com" target="_blank" title="张鑫旭">张鑫旭</a></li>
      <li><a href="http://hexo.io" target="_blank" title="Hexo">Hexo</a></li>
    </ul>
</div>


</aside>
</div>
    </div>
    <footer><div id="footer">
			<div class="bottom">
				<div class="word">
					Copyright 2015 zhuyangxing.cn AllRights Reserved.
				</div>
			</div>
		<script type="text/javascript">(function(){document.write(unescape('%3Cdiv id="bdcs"%3E%3C/div%3E'));var bdcs = document.createElement('script');bdcs.type = 'text/javascript';bdcs.async = true;bdcs.src = 'http://znsv.baidu.com/customer_search/api/js?sid=10861255704412712674' + '&plate_url=' + encodeURIComponent(window.location.href) + '&t=' + Math.ceil(new Date()/3600000);var s = document.getElementsByTagName('script')[0];s.parentNode.insertBefore(bdcs, s);})();</script>
</div>
</footer>
    <script src="/js/jquery-2.1.0.min.js"></script>
<script type="text/javascript">
$(document).ready(function(){ 
  $('.navbar').click(function(){
    $('header nav').toggleClass('shownav');
  });
  var myWidth = 0;
  function getSize(){
    if( typeof( window.innerWidth ) == 'number' ) {
      myWidth = window.innerWidth;
    } else if( document.documentElement && document.documentElement.clientWidth) {
      myWidth = document.documentElement.clientWidth;
    };
  };
  var m = $('#main'),
      a = $('#asidepart'),
      c = $('.closeaside'),
      o = $('.openaside');
  $(window).resize(function(){
    getSize(); 
    if (myWidth >= 1024) {
      $('header nav').removeClass('shownav');
    }else
    {
      m.removeClass('moveMain');
      a.css('display', 'block').removeClass('fadeOut');
      o.css('display', 'none');
      
      $('#toc.toc-aside').css('display', 'none');
        
    }
  });
  c.click(function(){
    a.addClass('fadeOut').css('display', 'none');
    o.css('display', 'block').addClass('fadeIn');
    m.addClass('moveMain');
  });
  o.click(function(){
    o.css('display', 'none').removeClass('beforeFadeIn');
    a.css('display', 'block').removeClass('fadeOut').addClass('fadeIn');      
    m.removeClass('moveMain');
  });
  $(window).scroll(function(){
    o.css("top",Math.max(80,260-$(this).scrollTop()));
  });
});
</script>

<script type="text/javascript">
$(document).ready(function(){ 
  var ai = $('.article-content>iframe'),
      ae = $('.article-content>embed'),
      t  = $('#toc'),
      h  = $('article h2')
      ah = $('article h2'),
      ta = $('#toc.toc-aside'),
      o  = $('.openaside'),
      c  = $('.closeaside');
  if(ai.length>0){
    ai.wrap('<div class="video-container" />');
  };
  if(ae.length>0){
   ae.wrap('<div class="video-container" />');
  };
  if(ah.length==0){
    t.css('display','none');
  }else{
    c.click(function(){
      ta.css('display', 'block').addClass('fadeIn');
    });
    o.click(function(){
      ta.css('display', 'none');
    });
    $(window).scroll(function(){
      ta.css("top",Math.max(140,320-$(this).scrollTop()));
    });
  };
});
</script>


<script type="text/javascript">
$(document).ready(function(){ 
  var $this = $('.share'),
      url = $this.attr('data-url'),
      encodedUrl = encodeURIComponent(url),
      title = $this.attr('data-title'),
      tsina = $this.attr('data-tsina');
  var html = [
  '<a href="#" class="overlay" id="qrcode"></a>',
  '<div class="qrcode clearfix"><span>扫描二维码分享到微信朋友圈</span><a class="qrclose" href="#share"></a><strong>Loading...Please wait</strong><img id="qrcode-pic" data-src="http://s.jiathis.com/qrcode.php?url=' + encodedUrl + '"/></div>',
  '<a href="#textlogo" class="article-back-to-top" title="Top"></a>',
  '<a href="https://www.facebook.com/sharer.php?u=' + encodedUrl + '" class="article-share-facebook" target="_blank" title="Facebook"></a>',
  '<a href="#qrcode" class="article-share-qrcode" title="QRcode"></a>',
  '<a href="https://twitter.com/intent/tweet?url=' + encodedUrl + '" class="article-share-twitter" target="_blank" title="Twitter"></a>',
  '<a href="http://service.weibo.com/share/share.php?title='+title+'&url='+encodedUrl +'&ralateUid='+ tsina +'&searchPic=true&style=number' +'" class="article-share-weibo" target="_blank" title="Weibo"></a>',
  '<span title="Share to"></span>'
  ].join('');
  $this.append(html);
  $('.article-share-qrcode').click(function(){
    var imgSrc = $('#qrcode-pic').attr('data-src');
    $('#qrcode-pic').attr('src', imgSrc);
    $('#qrcode-pic').load(function(){
        $('.qrcode strong').text(' ');
    });
  });
});     
</script>






  </body>
</html>
